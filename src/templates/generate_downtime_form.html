<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Generate Downtime YAML</title>
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/jquery-ui.min.css') }}">
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/jquery.ui.timepicker.css') }}">
    <script src="{{ url_for('static', filename='js/jquery-1.8.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-ui.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.ui.timepicker.js') }}"></script>
    <script>
	$(function() {
		$( ".datepick" ).datepicker({dateFormat: "yy-mm-dd"});
		$( ".timepick" ).timepicker();
	});

    </script>
    <style>
    @supports (display: grid) {
        @media only screen and (min-width: 75em) {
            .wrapper {
                display: grid;
            }

            .left {
                grid-column: 1/2;
                grid-row: 1;
            }

            .right {
                grid-column: 2/2;
                grid-row: 1;
            }
        }
    }
    input, textarea, select, button {
        width : 30em;
        margin: 0;

        -webkit-box-sizing: border-box; /* For legacy WebKit based browsers */
        -moz-box-sizing: border-box; /* For legacy (Firefox <29) Gecko based browsers */
        box-sizing: border-box;
    }
    </style>
</head>
<body>
{% from "_formhelpers.html" import render_field, render_datefield, render_timefield, render_hidden_field %}

<div class="wrapper">
<div class="left">
    <p>Generating downtime for {{ resource }} in {{ facility }}<br/>
<a href="{{ url_for('downtime_resource_select', facility=facility) }}">Change resource</a>
|
<a href="{{ url_for('downtime_resource_select') }}">Change facility</a>
</p>
<p>Dates and times are 24-hour UTC.</p>

<form method=post>
    <!-- NOTE: we are not using CSRF because none of the POST data is actually
    used to change anything.  If that ever changes, see
    https://flask-wtf.readthedocs.io/en/stable/csrf.html
    -->
    {{ render_hidden_field(form.resource) }}
    <table>
        {{ render_field(form.scheduled) }}
        {{ render_field(form.severity) }}
        {{ render_field(form.description ) }}
        {{ render_datefield(form.start_date) }}
        {{ render_timefield(form.start_time) }}
        {{ render_datefield(form.end_date) }}
        {{ render_timefield(form.end_time) }}
        {{ render_field(form.services) }}
        <tr>
            <td></td>
            <td>
                <input type="submit" value="Generate"/>
            </td>
        </tr>
    </table>
</form>
</div>
    <div class="right">
        {% if yaml %}
        Copy-and-paste the following YAML as-is to the end of <pre>"{{ filename }}"</pre>
        (create the file if it does not exist):
        <hr/>
        <pre>{{ yaml }}</pre>
        <hr/>
        {% endif %}
    </div>
</div>
</body>
</html>
